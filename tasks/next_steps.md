# 🚀 다음 개발 과업 제안: 실제 수익(PNL) 발생을 위한 최우선 과제

비동기 리팩토링을 통해 **"누구보다 빠르게 고래의 매수 신호를 포착하는 인프라"**는 완성되었습니다. 
하지만 현재 `status_WhaleCopy.json`을 보면 여전히 체결 건수가 0건이며, PNL 0.0 상태입니다. 
이제 우리의 목표는 **"잡은 신호를 어떻게든 낚아채어 진짜 수익으로 연결하는 것"**입니다. 이를 위해 다음 3가지 핵심 과제 중 가장 시급한 것을 선택하여 진행할 것을 제안합니다.

---

## 🎯 제안 1. 매수 체결 확률 극대화 (슬리피지 및 호가창 추적 로직 고도화)
현재는 `vwap_price <= target_price` 일 때만 즉시 체결하고, 아니면 1분간 대기열(`pending_orders`)에 둡니다. 하지만 고래가 진입하면 시장 가격이 순식간에 올라버려 1분 내에 원하는 가격이 오지 않을 확률이 큽니다.
* **해결 방안**: 
  1. `pending_orders` 대기 시간을 1분에서 3분~5분으로 늘리고, 가격 추세선(Momentum)을 분석해 유연하게 진입.
  2. 주문 호가창(Orderbook) 깊이(Depth)가 얇아 생기는 가짜 체결 실패(Slippage Spike)를 우회하기 위해, 지정가 주문(Limit Order Maker)을 깔아두는 방식 코딩. (현재는 시장가 VWAP 긁기 방식)

## 🎯 제안 2. 현금화(청산) 로직 최적화 (가장 중요)
고래를 따라 사는 것까진 좋은데, **"언제 팔 것인가?"** 가 현재 봇에는 없습니다. 현재 구조는 마켓이 끝날 때(Winner 결정 시점)까지 무조건 홀딩합니다. 고래들은 중간에 펌핑이 오면 팔고 나가버리는데, 우리는 끝까지 들고 있다가 손실을 볼 수 있습니다.
* **해결 방안**: 
  1. **고래의 '매도(SELL)' 트랜잭션 도 추적**하여 고래가 팔면 우리도 즉각 시장가로 던지는 'Mirror Exit' 로직 구현.
  2. 특정 수익률(예: +20%) 도달 시 절반 매도(Take Profit), 특정 손실률(예: -15%) 도달 시 자동 손절(Stop Loss) 하드코딩.

## 🎯 제안 3. V4 스코어링 기반 켈리 베팅(Kelly Criterion) 정교화
현재는 `bankroll의 5%` 범위 내에서 점수에 비례해 베팅(최대 100불)하고 있습니다. 하지만 시장의 '승률'을 제대로 반영하지 못하는 단순 비례식입니다.
* **해결 방안**:
  1. `whale_scorer.py`의 평가 데이터를 바탕으로 켈리 베팅 모델 적용. 확신이 높은 마켓(Score 90점 이상)에는 비중을 실어 수익금을 극대화하고, 50~60점대 마켓은 최소 금액으로 정찰병만 보내 자산 갉아먹기를 방지.

---
### 💡 David(사용자)에게 드리는 질문
**"현재 가장 병목이 되는 부분은 무엇이라고 생각하시나요?"**
- 단순히 **진입(매수)** 자체가 안 되고 있어서 답답하시다면 👉 **제안 1**
- 진입은 언젠가 되겠지만, 사놓고 **언제 팔지(청산)**가 고민이시라면 👉 **제안 2** (개인적으로 강력 추천)
- 베팅 사이즈 조절로 **리스크 헷지**를 원하신다면 👉 **제안 3**
